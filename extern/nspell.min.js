!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).nspell=e()}}((function(){var e=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},t=function(e,t){var r,i=0;if(!t)return n;if("long"===e.FLAG){for(r=new Array(Math.ceil(t.length/2));i<t.length;)r[i/2]=t.slice(i,i+2),i+=2;return r}return t.split("num"===e.FLAG?",":"")},n=[],r=[].push,i="etaoinshrdlcumwfgypbvkjxqz".split(""),o=/\s+/,s=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function l(e){return new RegExp(e+"$")}function a(e){return new RegExp("^"+e)}var u=function(e,t){for(var n=-1;++n<t.length;)e=e.replace(t[n][0],t[n][1]);return e},f=function(e,t,n){return n&&t in e&&n.indexOf(e[t])>-1},c=function(e,t){var n=-1;if(e.data[t])return!f(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN)for(;++n<e.compoundRules.length;)if(e.compoundRules[n].test(t))return!0;return!1};function h(e,t,n){return f(e,"KEEPCASE",t)||n||f(e,"FORBIDDENWORD",t)}var p=function(e,t,n){var r,i=t.trim();if(!i)return null;if(i=u(i,e.conversion.in),c(e,i))return!n&&f(e.flags,"FORBIDDENWORD",e.data[i])?null:i;if(i.toUpperCase()===i){if(r=i.charAt(0)+i.slice(1).toLowerCase(),h(e.flags,e.data[r],n))return null;if(c(e,r))return r}if((r=i.toLowerCase())!==i){if(h(e.flags,e.data[r],n))return null;if(c(e,r))return r}return null};function d(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var g=function(e){var t=d(e.charAt(0)),n=e.slice(1);return n?t===(n=d(n))?t:"u"===t&&"l"===n?"s":null:t},O=[].push;function m(e,t,n,r){var i,o,s,l,a,u,c,h,d,O,m,C,v,R=e.flags.TRY,w=e.data,E=e.flags,N=[],x=-1;if(r)for(;++x<r.length;)D(r[x],!0);for(x=-1;++x<n.length;)for(o="",s="",l=(i=n[x]).charAt(0),a=i,u=i.slice(1),c=l.toLowerCase()!==l,h=g(i),d=-1;++d<=i.length;)for(o+=s,O=a,u=(a=u).slice(1),s=l,m=c,(l=i.charAt(d+1))&&(c=l.toLowerCase()!==l),a&&m!==c&&(D(o+A(a)),D(o+A(l)+A(s)+u)),D(o+a),a&&D(o+l+s+u),v=-1;++v<R.length;)C=R[v],m&&C!==C.toUpperCase()?("s"!==h&&(D(o+C+O),D(o+C+a)),D(o+(C=C.toUpperCase())+O),D(o+C+a)):(D(o+C+O),D(o+C+a));return N;function D(n,r){var i,o=t.state[n];o!==Boolean(o)&&(N.push(n),o=(i=p(e,n))&&!f(E,"NOSUGGEST",w[i]),t.state[n]=o,o&&(t.weighted[n]=r?10:0,t.suggestions.push(n))),o&&t.weighted[n]++}function A(e){var t=e.charAt(0);return(t.toLowerCase()===t?t.toUpperCase():t.toLowerCase())+e.slice(1)}}var C=function e(t,n,r,i){for(var o,s,l,a,u,f=-1;++f<n.entries.length;)if(a=(o=n.entries[f]).continuation,u=-1,(!o.match||o.match.test(t))&&(s=o.remove?t.replace(o.remove,""):t,s="SFX"===n.type?s+o.add:o.add+s,i.push(s),a&&a.length))for(;++u<a.length;)(l=r[a[u]])&&e(s,l,r,i);return i},v=function(e,t,n,r){var i,o,s,l,a,u,f,c=-1;"NEEDAFFIX"in r.flags&&!(n.indexOf(r.flags.NEEDAFFIX)<0)||function(e,t,n){var r=e[t];t in e?r===w?e[t]=n.concat():R.apply(r,n):e[t]=n.concat()}(e,t,n);for(;++c<n.length;)if(i=r.rules[n[c]],n[c]in r.compoundRuleCodes&&r.compoundRuleCodes[n[c]].push(t),i)for(u=C(t,i,r.rules,[]),o=-1;++o<u.length;)if(u[o]in e||(e[u[o]]=w),i.combineable)for(s=c;++s<n.length;)if((a=r.rules[n[s]])&&a.combineable&&i.type!==a.type)for(f=C(u[o],a,r.rules,[]),l=-1;++l<f.length;)f[l]in e||(e[f[l]]=w)},R=[].push,w=[],E=[],N=/\s/g;function x(e,n,r){for(var i,o,s=e.indexOf("/"),l=e.indexOf("#"),a="";s>-1&&92===e.charCodeAt(s-1);)s=(e=e.slice(0,s-1)+e.slice(s)).indexOf("/",s);l>-1?s>-1&&s<l?(i=e.slice(0,s),N.lastIndex=s+1,o=N.exec(e),a=e.slice(s+1,o?o.index:void 0)):i=e.slice(0,l):s>-1?(i=e.slice(0,s),a=e.slice(s+1)):i=e,(i=i.trim())&&v(r,i,t(n.flags,a.trim()),n)}var D=y,A=y.prototype;function y(n,u){var f,c=-1;if(!(this instanceof y))return new y(n,u);if("string"==typeof n||e(n)?("string"==typeof u||e(u))&&(f=[{dic:u}]):n&&("length"in n?(f=n,n=n[0]&&n[0].aff):(n.dic&&(f=[n]),n=n.aff)),!n)throw new Error("Missing `aff` in dictionary");if(n=function(e){var n,u,f,c,h,p,d,g,O,m,C,v,R=Object.create(null),w=Object.create(null),E=Object.create(null),N=[],x={in:[],out:[]},D=[],A=e.toString("utf8"),y=[],b=0,I=A.indexOf("\n");for(E.KEY=[];I>-1;)M(A.slice(b,I)),b=I+1,I=A.indexOf("\n",b);for(M(A.slice(b)),I=-1;++I<y.length;)if("REP"===(u=(n=y[I].split(o))[0])){for(f=I+parseInt(n[1],10);++I<=f;)n=y[I].split(o),N.push([n[1],n[2]]);I--}else if("ICONV"===u||"OCONV"===u){for(f=I+parseInt(n[1],10),d=x["ICONV"===u?"in":"out"];++I<=f;)n=y[I].split(o),d.push([new RegExp(n[1],"g"),n[2]]);I--}else if("COMPOUNDRULE"===u){for(f=I+parseInt(n[1],10);++I<=f;)for(O=y[I].split(o)[1],g=-1,D.push(O);++g<O.length;)w[O.charAt(g)]=[];I--}else if("PFX"===u||"SFX"===u){for(f=I+parseInt(n[3],10),O={type:u,combineable:"Y"===n[2],entries:[]},R[n[1]]=O;++I<=f;){c=(n=y[I].split(o))[2],h=n[3].split("/"),p=n[4],d={add:"",remove:"",match:"",continuation:t(E,h[1])},h&&"0"!==h[0]&&(d.add=h[0]);try{"0"!==c&&(d.remove="SFX"===u?l(c):c),p&&"."!==p&&(d.match="SFX"===u?l(p):a(p))}catch(F){d=null}d&&O.entries.push(d)}I--}else if("TRY"===u){for(p=n[1],C=-1,m=[];++C<p.length;)(v=p.charAt(C)).toLowerCase()===v&&m.push(v);for(C=-1;++C<i.length;)p.indexOf(i[C])<0&&m.push(i[C]);E[u]=m}else"KEY"===u?r.apply(E[u],n[1].split("|")):"COMPOUNDMIN"===u?E[u]=Number(n[1]):"ONLYINCOMPOUND"===u?(E[u]=n[1],w[n[1]]=[]):E[u]=n[1];return isNaN(E.COMPOUNDMIN)&&(E.COMPOUNDMIN=3),E.KEY.length||(E.KEY=s),E.TRY||(E.TRY=i.concat()),E.KEEPCASE||(E.KEEPCASE=!1),{compoundRuleCodes:w,replacementTable:N,conversion:x,compoundRules:D,rules:R,flags:E};function M(e){(e=e.trim())&&35!==e.charCodeAt(0)&&y.push(e)}}(n),this.data=Object.create(null),this.compoundRuleCodes=n.compoundRuleCodes,this.replacementTable=n.replacementTable,this.conversion=n.conversion,this.compoundRules=n.compoundRules,this.rules=n.rules,this.flags=n.flags,f)for(;++c<f.length;)f[c].dic&&this.dictionary(f[c].dic)}return A.correct=function(e){return Boolean(p(this,e))},A.suggest=function(e){var t,n,r,i,o,s,l,a,f,c,h,p,d,C,v,R,w,E,N,x,D,A,y,b,I,M={},F=[],U={},L=[];if(!(e=u(e.trim(),this.conversion.in))||this.correct(e))return[];for(I=g(e),i=-1;++i<this.replacementTable.length;)for(n=this.replacementTable[i],o=e.indexOf(n[0]);o>-1;)L.push(e.replace(n[0],n[1])),o=e.indexOf(n[0],o+1);for(i=-1;++i<e.length;)for(c=e.charAt(i),p=e.slice(0,i),d=e.slice(i+1),C=(v=c.toLowerCase())!==c,M={},o=-1;++o<this.flags.KEY.length;)if(!((s=(h=this.flags.KEY[o]).indexOf(v))<0))for(a=-1;++a<h.length;)if(a!==s){if(M[f=h.charAt(a)])continue;M[f]=!0,C&&(f=f.toUpperCase()),L.push(p+f+d)}for(i=-1,N=e.charAt(0),r=[""],x=1,D=0;++i<e.length;){for(c=N,N=e.charAt(i+1),p=e.slice(0,i),n=c===N?"":c+c,o=-1,l=r.length;++o<l;)o<=x&&r.push(r[o]+n),r[o]+=c;++D<3&&(x=r.length)}for(O.apply(L,r),r=[e],n=e.toLowerCase(),(e===n||null===I)&&r.push(e.charAt(0).toUpperCase()+n.slice(1)),n=e.toUpperCase(),e!==n&&r.push(n),R=m(this,t={state:{},weighted:U,suggestions:F},r,L),w=0,x=Math.min(R.length,Math.pow(Math.max(15-e.length,3),3)),A=Math.max(Math.pow(10-e.length,3),1);!F.length&&w<x;)E=w+A,m(this,t,R.slice(w,E)),w=E;for(F.sort((function(e,t){return function(e,t){return U[e]===U[t]?0:U[e]>U[t]?-1:1}(e,t)||function(e,t){var n=g(e),r=g(t);return n===r?0:n===I?-1:r===I?1:void 0}(e,t)||function(e,t){return e.localeCompare(t)}(e,t)})),r=[],y=[],i=-1;++i<F.length;)n=(b=u(F[i],this.conversion.out)).toLowerCase(),y.indexOf(n)<0&&(r.push(b),y.push(n));return r},A.spell=function(e){var t=p(this,e,!0);return{correct:this.correct(e),forbidden:Boolean(t&&f(this.flags,"FORBIDDENWORD",this.data[t])),warn:Boolean(t&&f(this.flags,"WARN",this.data[t]))}},A.add=function(e,t){return v(this.data,e,this.data[t]||E,this),this},A.remove=function(e){return delete this.data[e],this},A.wordCharacters=function(){return this.flags.WORDCHARS||null},A.dictionary=function(e){var t,n,r,i,o=-1;for(!function(e,t,n){for(var r=e.toString("utf8"),i=r.indexOf("\n")+1,o=r.indexOf("\n",i);o>-1;)9!==r.charCodeAt(i)&&x(r.slice(i,o),t,n),i=o+1,o=r.indexOf("\n",i);x(r.slice(i),t,n)}(e,this,this.data);++o<this.compoundRules.length;){for(t=this.compoundRules[o],n="",i=-1;++i<t.length;)r=t.charAt(i),n+=this.compoundRuleCodes[r].length?"(?:"+this.compoundRuleCodes[r].join("|")+")":r;this.compoundRules[o]=new RegExp(n,"i")}return this},A.personal=function(e){var t,n,r,i,o=e.toString("utf8").split("\n"),s=-1;for(void 0===this.flags.FORBIDDENWORD&&(this.flags.FORBIDDENWORD=!1),i=this.flags.FORBIDDENWORD;++s<o.length;)(t=o[s].trim())&&((n="*"===(r=(t=t.split("/"))[0]).charAt(0))&&(r=r.slice(1)),this.add(r,t[1]),n&&this.data[r].push(i));return this},D}));